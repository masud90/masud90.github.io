<!DOCTYPE html>
<html lang="{{ site.lang | default: "en-US" }}">
<head>
  {% include head.html %}
  <link rel="stylesheet" href="{{ '/assets/css/style.css' | relative_url }}">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
  <style>
    /* Optional: some basic styling for the dropdown */
    .filter-container {
      margin-bottom: 20px;
    }
  </style>
</head>
<body>
  <div class="col-lg-8 mx-auto p-3 py-md-5">
    {% include header.html %}
    <div class="container">
      <h1>{{ page.title }}</h1>
      <p style="color:#808080;"><em><small>
        This section is currently under development, some links will continue to be updated/ added as they become available.
    </small></em></p>
      <p>
        This page contains a list of sample projects built mostly using tutorial datasets and some real life projects that showcase my skills of using data science and machine learning tools. Primarily, the projects use Python, R, or Stata, and visualizations use tools like PowerBI, Tableau, Shiny, or Quarto/RevealJS.
    </p>    
      <!-- Filter Dropdowns -->
      <div class="filter-container">
        <label for="technologyFilter">Filter by Technology:</label>
        <select id="technologyFilter" onchange="filterTable()">
          <option value="all">All</option>
          {% assign technologies = site.data.projects | map: 'Technology' | uniq %}
          {% for tech in technologies %}
            <option value="{{ tech }}">{{ tech }}</option>
          {% endfor %}
        </select>
        
        <label for="projectTypeFilter">Filter by Project Type:</label>
        <select id="projectTypeFilter" onchange="filterTable()">
          <option value="all">All</option>
          {% assign all_types = "" %}
          {% for project in site.data.projects %}
            {% assign types = project.ProjectType | split: ',' %}
            {% for type in types %}
              {% assign all_types = all_types | append: type | append: ',' %}
            {% endfor %}
          {% endfor %}
          {% assign unique_types = all_types | split: ',' | uniq %}
          {% for type in unique_types %}
            {% if type != "" %}
              <option value="{{ type | strip }}">{{ type | strip }}</option>
            {% endif %}
          {% endfor %}
        </select>
      </div>

      <table id="projectsTable">
        <thead>
          <tr>
            <th>Project Title</th>
            <th>Technology</th>
            <th>Project Type</th>
          </tr>
        </thead>
        <tbody>
          {% for project in site.data.projects %}
            {% include project_row.html project=project %}
          {% endfor %}
        </tbody>
      </table>
    </div>
    {% include footer.html %}
  </div>

  <script>
    function filterTable() {
      var techFilter = document.getElementById('technologyFilter').value;
      var typeFilter = document.getElementById('projectTypeFilter').value;
      var table = document.getElementById('projectsTable');
      var tr = table.getElementsByTagName('tr');

      for (var i = 1; i < tr.length; i++) { // Start from 1 to skip the header row
        var techTd = tr[i].getElementsByTagName('td')[1]; // Technology column
        var typeTd = tr[i].getElementsByTagName('td')[2]; // Project Type column
        if (techTd && typeTd) {
          var tech = techTd.textContent || techTd.innerText;
          var types = typeTd.textContent || typeTd.innerText;
          var typeArray = types.split(',').map(function(type) {
            return type.trim();
          });

          var techMatch = (techFilter === 'all' || tech === techFilter);
          var typeMatch = (typeFilter === 'all' || typeArray.includes(typeFilter));

          if (techMatch && typeMatch) {
            tr[i].style.display = '';
          } else {
            tr[i].style.display = 'none';
          }
        }
      }
    }
  </script>
</body>
</html>